<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laundry Klin</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="shortcut icon" href="assets/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="style/hover.css">
    <link rel="stylesheet" href="style/font.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Catamaran:wght@100..900&family=Lato&family=Nunito+Sans:opsz@6..12&display=swap"
        rel="stylesheet">
</head>

<body style="background-color: #E9F5F8;">

    <!--navbar-->
    <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm sticky-top" data-aos="fade-down" data-aos-duration="500">
        <div class="container">
            <img src="assets/logo-laundryklin.png" alt="Bootstrap" width="89.9" height="27.7">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link me-3" href="index.html">Home</a>
                    <a class="nav-link me-3" href="services.html">Services</a>
                    <a class="nav-link me-3" href="aboutus.html">About us</a>
                    <a class="nav-link me-3" aria-current="page" href="booking.html" style="color: #219EBA;">Booking</a>
                    <a class="nav-link me-3" href="blog.html">Blogs</a>
                    <a class="nav-link me-3" href="#footer-down">Contact us</a>
                    <a class="nav-link me-3" href="user_profil.html"><i class="bi bi-person-fill text-dark"></i></a>
                </div>
            </div>
        </div>
    </nav>
    <!--navbar-->

    <!--booking-->
    <div class="container bg-body-tertiary m-5 p-5 rounded shadow ms-auto me-auto" id="booking-page">
        <div class="row">
            <div class="col">
                <h1 class="lato-regular fw-bold">Book Your Laundry</h1>
                <h2 class="lato-regular fw-bold"><img src="assets/ikon-booking-1.png" alt=""> Isi Data Berikut</h2>
                <form name="booking-laundry" id="booking-form">
                    <div class="mb-3">
                        <label for="nama-customer" class="form-label text-white p-1 rounded catamaran-font"
                            style="background-color: #0D3F4A;">Nama</label>
                        <input type="text" class="form-control" id="nama-customer" placeholder="Nama Lengkap" required
                            name="Nama">
                    </div>
                    <div class="mb-3">
                        <label for="formGroupExampleInput2" class="form-label text-white p-1 rounded catamaran-font"
                            style="background-color: #0D3F4A;">Nomor Telepon</label>
                        <input type="number" class="form-control" id="formGroupExampleInput2"
                            placeholder="Masukan Nomor Telepon" required name="Nomor Telepon">
                    </div>
                    <div class="mb-3">
                        <label for="exampleFormControlTextarea1" class="form-label text-white p-1 rounded catamaran-font"
                            style="background-color: #0D3F4A;">Alamat</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" required
                            name="Alamat"></textarea>
                    </div>
                    <h2 class="lato-regular fw-bold"><img src="assets/ikon-booking-2.png" alt=""> Detail Laundry</h2>
                    <select class="form-select" aria-label="Default select example" id="jenis-laundry" required
                        name="Jenis Laundry">
                        <option selected disabled>Pilih Jenis Laundry</option>
                        <option value="Cuci Kering">Cuci Kering Rp 7.000/kg</option>
                        <option value="Cuci dan Setrika">Cuci + Setrika
                            Rp 10.000/kg</option>
                        <option value="Setrika Saja">Setrika Saja
                            Rp 5.000/kg</option>
                        <option value="Cuci Bed
                            Cover dan Sprei">Cuci Bed
                            Cover & Sprei
                            Rp 30.000/set</option>
                        <option value="Cuci Boneka">Cuci Boneka
                            Rp 20.000/pcs</option>
                        <option value="Cuci Karpet">Cuci Karpet
                            Rp 25.000/mÂ²</option>
                    </select>
                    <select class="form-select mt-2" aria-label="Default select example" id="estimasi" required
                        name="Estimasi">
                        <option selected disabled>Estimasi Pengerjaan</option>
                        <option value="Regular">Regular (2-3 hari) Rp 0</option>
                        <option value="Express">Express (24 jam) +Rp 8.000</option>
                    </select>
                    <div class="mb-3 mt-2">
                        <label for="formGroupExampleInput2" class="form-label text-white p-1 rounded catamaran-font"
                            style="background-color: #0D3F4A;">Berat (Kg)</label>
                        <input type="number" class="form-control" id="berat" placeholder="Masukan berat cucian Anda...."
                            required name="Berat">
                    </div>
                    <h2 class="lato-regular fw-bold"><img src="assets/ikon-booking-3.png" alt=""> Jenis Pengiriman</h2>
                    <select class="form-select mt-2" aria-label="Default select example" id="jenis-pengiriman" required
                        name="Jenis Pengiriman">
                        <option selected disabled>Jenis Pengiriman</option>
                        <option value="Antar Jemput">Antar Jemput
                            Rp 8.000</option>
                        <option value="Antar Saja">Antar Saja
                            Rp 4.000</option>
                        <option value="Jemput Saja">Jemput Saja
                            Rp 4.000</option>
                        <option value="Drop Off">Drop off
                            Rp 0</option>
                    </select>
                    <button type="button" class="btn btn-primary mt-3 catamaran-font" onclick="invoice()">Order</button>
                </form>
            </div>
        </div>
    </div>
    <!--booking-->

    <!--invoice-->
    <section id="invoice" class="">
        <div class="container justify-content-center mt-5 mb-5">
            <div class="row justify-content-center">
                <div class="col-md-8 text-center">
                    <h2 class="lato-regular fw-bold">Ringkasan Pesanan</h2>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-5">
                    <div class="card shadow-sm rounded-3">
                        <div class="card-header bg-primary text-white text-center">
                            <h4 class="mb-0 lato-regular fw-bold">Detail Pesanan Laundry</h4>
                        </div>
                        <div class="card-body p-4">
                            <table class="table table-borderless">
                                <tbody>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Tanggal Order</td>
                                        <td>: <span id="date"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Waktu</td>
                                        <td>: <span id="waktu-order"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Nama Customer</td>
                                        <td>: <span id="nama-customer-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Jenis Laundry</td>
                                        <td>: <span id="jenis-laundry-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Berat</td>
                                        <td>: <span id="berat-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Estimasi Selesai</td>
                                        <td>: <span id="estimasi-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-semibold catamaran-font">Jenis Pengiriman</td>
                                        <td>: <span id="jenis-pengiriman-display"></span></td>
                                    </tr>
                                </tbody>
                            </table>

                            <hr>
                            <h5 class="text-center mb-3 catamaran-font fw-bold">Rincian Biaya</h5>

                            <table class="table table-borderless">
                                <tbody>
                                    <tr>
                                        <td class="catamaran-font fw-semibold">Biaya Laundry</td>
                                        <td class="text-end"><span id="biaya-laundry-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="catamaran-font fw-semibold">Biaya Estimasi</td>
                                        <td class="text-end"><span id="biaya-estimasi-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="catamaran-font fw-semibold">Biaya Pengiriman</td>
                                        <td class="text-end"><span id="biaya-pengiriman-display"></span></td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold fs-5 catamaran-font">Total Harga</td>
                                        <td class="text-end fw-bold fs-5 text-success"><span
                                                id="total-harga-display"></span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center mt-5">
                <div class="col-md-8 text-center">
                    <h2 class="lato-regular fw-bold">Metode Pembayaran</h2>
                </div>
            </div>
            <div class="row justify-content-center bg-body-tertiary rounded-3 shadow mt-3 p-3">
                <div class="col-md-8">
                    <select class="form-select" aria-label="Default select example" required name="Metode Pembayaran"
                        form="booking-form">
                        <option selected disabled>Pilih Metode Pembayaran</option>
                        <option value="Cash">Cash</option>
                        <option value="M-Banking">M-Banking</option>
                        <option value="Qris">Qris</option>
                        <option value="E-Wallet">E-Wallet</option>
                    </select>
                </div>
                <div class="row justify-content-center mt-3 p-3">
                    <div class="col-md-4 text-center">
                        <button type="button" class="btn mt-3 text-white fw-bold" onclick="editPesanan()"
                            style="background-color: #06B6D4;">Edit Pesanan</button>
                    </div>
                    <div class="col-md-4 text-center">
                        <button type="submit" class="btn mt-3 text-white fw-bold" style="background-color: #06B6D4;"
                            form="booking-form">Buat Pesanan</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--invoice-->

    <!--footer-->
    <footer style="background-color: #0D3F4A;">
        <div class="container p-5 mt-3 justify-content-center" id="footer-down">
            <div class="row">
                <div class="col-md-12 text-start text-white">
                    <h1 data-aos="fade-right" data-aos-duration="1000">Laundry <span style="color: #219EBA;">Klin</span></h1><br>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 text-white" data-aos="fade-right" data-aos-duration="1000">
                    <h4 class="mt-3">Jam Operasional</h4>
                    <p>Setiap Hari/ 08:00 - 21:00</p><br>
                    <p>Layanan Konsumen</p>
                    <p><i class="bi bi-telephone-fill"></i> 0811-1566-664</p>
                    <p><i class="bi bi-envelope-fill"></i> support@kliknklin.co</p>
                </div>
                <div class="col-md-3 text-white" data-aos="fade-up" data-aos-duration="1100">
                    <h4 class="mt-3">Menu</h4>
                    <a href="index.html" class="footer-link">Home</a>
                    <a href="booking.html" class="footer-link">Booking</a>
                    <a href="services.html" class="footer-link">Service</a>
                    <a href="user_profil.html" class="footer-link">My Profile</a>
                </div>
                <div class="col-md-3 text-white" data-aos="fade-down" data-aos-duration="1100">
                    <h4 class="mt-3">Company</h4>
                    <a href="aboutus.html" class="footer-link">About us</a>
                    <a href="blog.html" class="footer-link">Blogs</a>
                </div>
                <div class="col-md-3 text-white" data-aos="fade-up" data-aos-duration="1100">
                    <h4 class="mt-3">Social Media</h4>
                    <p><a href=""><img src="assets/logo-wa.png" alt="" width="59" height="59"></a> <a href=""><img
                                src="assets/logo-ig.png" alt="" width="50" height="50"></a></p>
                </div>
            </div>
        </div>
    </footer>

    <footer>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12 text-center">
                    <p class="fw-bold mt-2">@All Copyright 2025, Laundryklin. All Rights Reserved.
                    <p>
                </div>
            </div>
        </div>
    </footer>
    <!--footer-->

    <script>

        const displayBooking = document.getElementById('booking-page')
        const displayInvoice = document.getElementById('invoice')
        displayInvoice.classList.toggle('d-none');

        function invoice() {

            const bookingForm = document.getElementById('booking-form');
            event.preventDefault();

            if (bookingForm.checkValidity()) {

                //Munculkan Invoice
                displayInvoice.classList.toggle('d-none');
                displayBooking.classList.toggle('d-none');

                //Tanggal
                const monthNames = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
                const tanggal = new Date();
                const date = tanggal.getDate();
                const month = tanggal.getMonth();
                const year = tanggal.getFullYear();
                const hour = tanggal.getHours();
                const minute = tanggal.getMinutes();
                const second = tanggal.getSeconds();
                const kalender = `${date} ${monthNames[month]} ${year}`;
                const waktu = `${hour} : ${minute} : ${second}`

                //Mendapatkan value
                const namaCustomer = document.getElementById('nama-customer').value;
                const jenisLaundry = document.getElementById('jenis-laundry').value;
                const berat = document.getElementById('berat').value;
                const estimasi = document.getElementById('estimasi').value;
                const jenisPengiriman = document.getElementById('jenis-pengiriman').value;

                //Hitung biaya
                const biayaLaundry = () => {
                    switch (jenisLaundry) {
                        case "Cuci Kering":
                            return 7000 * berat;
                            break;
                        case "Cuci dan Setrika":
                            return 10000 * berat;
                            break;
                        case "Setrika Saja":
                            return 5000 * berat;
                            break;
                        case "Cuci Bed Cover dan Sprei":
                            return 30000 * berat;
                            break;
                        case "Cuci Boneka":
                            return 20000 * berat;
                            break;
                        case "Cuci Karpet":
                            return 25000 * berat;
                            break;
                    }
                };
                const biayaEstimasi = () => {
                    switch (estimasi) {
                        case "Regular":
                            return 0
                            break;
                        case "Express":
                            return 8000
                            break;
                    }
                };
                const biayaPengiriman = () => {
                    switch (jenisPengiriman) {
                        case "Antar Jemput":
                            return 8000
                            break;
                        case "Antar Saja":
                            return 4000
                            break;
                        case "Jemput Saja":
                            return 4000
                            break;
                        case "Drop Off":
                            return 0
                            break;
                    }
                };
                const biayaLaundryFinal = biayaLaundry();
                const biayaEstimasiFinal = biayaEstimasi();
                const biayaPerngirimanFinal = biayaPengiriman();
                const totalHarga = biayaLaundryFinal + biayaEstimasiFinal + biayaPerngirimanFinal;

                //Proses Display
                document.getElementById('date').innerHTML = kalender
                document.getElementById('waktu-order').innerHTML = waktu
                document.getElementById('nama-customer-display').innerHTML = namaCustomer;
                document.getElementById('jenis-laundry-display').innerHTML = jenisLaundry;
                document.getElementById('berat-display').innerHTML = berat;
                document.getElementById('estimasi-display').innerHTML = estimasi;
                document.getElementById('jenis-pengiriman-display').innerHTML = jenisPengiriman;
                document.getElementById('biaya-laundry-display').innerHTML = 'Rp' + biayaLaundryFinal.toLocaleString('id-ID');
                document.getElementById('biaya-estimasi-display').innerHTML = 'Rp' + biayaEstimasiFinal.toLocaleString('id-ID');
                document.getElementById('biaya-pengiriman-display').innerHTML = 'Rp' + biayaPerngirimanFinal.toLocaleString('id-ID');
                document.getElementById('total-harga-display').innerHTML = 'Rp' + totalHarga.toLocaleString('id-ID');

            } else {
                alert('Harap isi semua kolom yang wajib diisi sebelum melanjutkan.');
            }
        }



        //Input ke Database
        const scriptURL = 'https://script.google.com/macros/s/AKfycbyTpE1X6WqKm4neWOMo2G5fd8tBxRLlDbv7wcon0a4sj3YZzhadHdUjFKOUh2ww4J3G/exec'
        const form = document.forms['booking-laundry']
        const btnBuatPesanan = document.querySelector('button[form="booking-form"]');

        form.addEventListener('submit', e => {
            e.preventDefault()

            // Tampilkan status loading pada tombol
            btnBuatPesanan.disabled = true;
            btnBuatPesanan.innerHTML = 'Memproses...';


            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    console.log('Success!', response);
                    alert('Pesanan Anda telah berhasil dibuat!');
                    // Reset form
                    form.reset();
                    // Sembunyikan invoice dan tampilkan kembali halaman booking
                    displayInvoice.classList.add('d-none');
                    displayBooking.classList.remove('d-none');
                })
                .catch(error => {
                    console.error('Error!', error.message);
                    // Beri notifikasi error
                    alert('Terjadi kesalahan. Gagal membuat pesanan.');
                })
                .finally(() => {
                    // Kembalikan tombol ke keadaan semula
                    btnBuatPesanan.disabled = false;
                    btnBuatPesanan.innerHTML = 'Buat Pesanan';
                });
        })

        //Edit Pesanan
        function editPesanan() {
            displayInvoice.classList.toggle('d-none');
            displayBooking.classList.toggle('d-none');
        }

        AOS.init();

    </script>


</body>

</html>